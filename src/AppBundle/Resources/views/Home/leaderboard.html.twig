{% extends "::base.html.twig" %}

{% block title %}Leaderboard{% endblock %}

{% block stylesheets %}
    {{ parent() }}
{% endblock %}

{% block body %}
   <div class="container">
       {% if maxPages > 1 %}
           <ul class="pagination pagination-sm">
               {# `«` arrow  #}
               <li {{ thisPage == 1 ? 'class="disabled"' }}>
                   <a href="{{ path('leaderboard', {page: thisPage-1 < 1 ? 1 : thisPage-1}) }}">«</a>
               </li>

               {# Render each page number #}
               {% for i in 1..maxPages %}
                   {% if i - 6 < thisPage and i + 6 > thisPage %}
                   <li {{ thisPage == i ? 'class="active"' }}>
                       <a href="{{ path('leaderboard', {page: i}) }}">{{ i }}</a>
                   </li>
                    {% endif %}
               {% endfor %}

               {# `»` arrow #}
               <li {{ thisPage == maxPages ? 'class="disabled"' }}>
                   <a href="{{ path('leaderboard', {page: thisPage+1 <= maxPages ? thisPage+1 : thisPage}) }}">»</a>
               </li>
           </ul>
       {% endif %}

       <div class="row">
           <div class="col-lg-1 col-md-1 col-sm-1 col-xs-2"><b>Rank</b></div>
           <div class="col-lg-2 col-md-2 col-sm-4 col-xs-4"><b>User</b></div>
           <div class="col-lg-2 col-md-2 col-sm-4 col-xs-4"><b>Correct answers</b></div>
           <div class="col-lg-2 col-md-2 col-sm-4 col-xs-4"><b>Correct answer ratio</b></div>
           <div class="col-lg-2 col-md-2 col-sm-4 col-xs-4"><b>Incorrect answers</b></div>
           <div class="col-lg-2 col-md-2 col-sm-4 col-xs-4"><b>Time spent</b></div>
       </div>
       {% for user in best %}

           {% if (user.correct + user.incorrect) > 0 %}
               {% set percentage = user.correct / (user.correct + user.incorrect) * 100 %}
           {% else %}
               {% set percentage = 0 %}
           {% endif %}

           <div class="row">
               <div class="col-lg-1 col-md-1 col-sm-1 col-xs-2">{{ user.username }}</div>
               <div class="col-lg-2 col-md-2 col-sm-4 col-xs-4">{{ user.username }}</div>
               <div class="col-lg-2 col-md-2 col-sm-4 col-xs-4">{{ user.correct }}</div>
               <div class="col-lg-2 col-md-2 col-sm-4 col-xs-4">{{ percentage|number_format(2) ~ '%' }}</div>
               <div class="col-lg-2 col-md-2 col-sm-4 col-xs-4">{{ user.incorrect }}</div>
               <div class="col-lg-2 col-md-2 col-sm-4 col-xs-4">{{ user.FormatedTimeSpent }}</div>
           </div>
       {% endfor %}
   </div>
{% endblock %}
